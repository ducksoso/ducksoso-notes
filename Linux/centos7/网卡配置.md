# Linux网卡

## 1.ifconfig 命令

lo代表127.0.0.1，即localhost

eth0, eth1, eth2 ... 代表网卡1 2 3

#### 1. 启用网卡

`ifconfig eth0 up`

#### 2. 禁用网卡

`ifconfig eth0 down`

#### 3. 配置网卡的IP地址

`ifconfig eth0 192.168.0.1 netmask 255.255.255.0`

在eth0上配置上192.168.0.1 的IP地址及24位掩码

## 2.centos7查看IP并开启Ens33网卡IP

centos7 ifcfg-ens33(没有eth0网卡) ifcfg-lo

ip addr，发现ip地址ens33中的inet，没有inet属性，那么就无法通过IP地址连接虚拟机。

1. 查看ens33网卡的配置

   `vi /etc/sysconfig/network-scripts/ifcfg-ens33`

   ```
   TYPE=Ethernet
   BOOTPROTO=dhcp
   PROXY_METHOD=none
   IPV4_FAILURE_FATAL=no
   IPV6INIT=yes
   IPV6_AUTOCONF=yes
   IPV6_FAILURE_FATAL=no
   IPV6_ADDR_GEN_MODE=stable-privacy
   NAME=ens33
   DEVICE=ens33
   ONBOOT=no
   
   # 这里要改的就是ONBOOT=yes
   
   ```

   改为默认启动网卡

2. 重启网络服务

   `sudo systemctl restart network`

3. 网卡说明

   ```
   TYPE=Ethernet
   BOOTPROTO=none     # 等号后面写：dhcp 表示动态获取IP地址，  static 表示静态IP，none表示不指定，就是静态。
   DEFROUTE=yes
   IPV4_FAILURE_FATAL=no
   IPV6INIT=yes
   IPV6_AUTOCONF=yes
   IPV6_DEFROUTE=yes
   IPV6_FAILURE_FATAL=no
   NAME=ens33   #网卡名
   UUID=50eff37c-72b4-407a-a3ee-9ef8ca746b95
   DEVICE=ens33
   ONBOOT=yes
   DNS1=8.8.8.8
   DNS2=192.168.1.1
   NETMASK=255.255.255.0
   IPADDR=192.168.1.222
   PREFIX=24
   GATEWAY=192.168.1.1
   IPV6_PEERDNS=yes
   IPV6_PEERROUTES=yes
   IPV6_PRIVACY=no
   
   #配置文件参数说明：
   #DEVICE：此配置文件应用到的设备
   #HWADDR：对应的设备的MAC地址
   #BOOTPROTO：激活此设备时使用的地址配置协议，常用的dhcp, static, none,bootp
   #NM_CONTROLLED： NM是NetworkManager的简写，此网卡是否接受NM控制；建议CentOS6为“no”
   #ONBOOT：在系统引导时是否激活此设备
   #TYPE：接口类型；常见有的Ethernet, Bridge
   #UUID：设备的惟一标识
   #IPADDR：指明IP地址
   #NETMASK：子网掩码
   #GATEWAY: 默认网关
   #DNS1：第一个DNS服务器指向
   #DNS2：第二个DNS服务器指向
   #USERCTL：普通用户是否可控制此设备
   #IPV4_FAILURE_FATAL 如果为yes，则ipv4配置失败禁用设备
   
   ```

   

## 3.查看路由、DNS、主机名

```bash
# ip route
➜  ~ ip route
default via 192.168.144.2 dev ens33 proto dhcp metric 100
192.168.144.0/24 dev ens33 proto kernel scope link src 192.168.144.130 metric 100

# cat /etc/resolv.conf
➜  ~ cat /etc/resolv.conf
# Generated by NetworkManager
search localdomain
nameserver 192.168.144.2

# hostname
➜  ~ cat /etc/hostname
localhost.localdomain

```



### 3.1 修改网卡DNS地址

1. 临时修改网卡DNS地址

   `sudo vim /etc/resolv.conf`

   修改为：

   ```bash
   nameserver 8.8.8.8 #修改成你的主DNS
   nameserver 8.8.4.4 #修改成你的备用DNS
   
   search localhost # 你的域名
   ```

2. 永久修改DNS地址

   ```bash
   sudo -i
   cd /etc/resolvconf/resolv.conf.d
   vim base
   ```

   添加如下内容：

   ```bash
   nameserver 8.8.8.8 #修改成你的主DNS
   nameserver 8.8.4.4 #修改成你的备用DNS
   ```

   

### 3.2 另一种方式

1. Host本地DNS解析

   `223.231.234.33 www.baidu.com`

2. 网卡配置文件DNS服务地址

   `vim /etc/sysconfig/network-scripts/ifcfg-ens33`

   添加规则如下：

   `DNS1=114.114.114.114`

   `DNS2=8.8.8.8`

3. 系统默认DNS配置

   `vim /etc/resolv.conf`

系统解析的优先级

1 > 2 > 3









